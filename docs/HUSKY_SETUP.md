# ğŸ”§ Husky é…ç½®è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®é…ç½®äº† Husky æ¥ç¡®ä¿ä»£ç è´¨é‡ï¼Œåœ¨æ¯æ¬¡æäº¤æ—¶è‡ªåŠ¨è¿è¡Œæ£€æŸ¥ã€‚

## ğŸ› ï¸ å·²é…ç½®çš„é’©å­

### Pre-commit é’©å­

åœ¨æ¯æ¬¡æäº¤å‰è‡ªåŠ¨è¿è¡Œï¼š

1. **Lint-staged**: åªæ£€æŸ¥æš‚å­˜åŒºçš„æ–‡ä»¶
   - ESLint æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤
   - Prettier ä»£ç æ ¼å¼åŒ–

2. **TypeScript ç±»å‹æ£€æŸ¥**: ç¡®ä¿æ²¡æœ‰ç±»å‹é”™è¯¯

### Commit-msg é’©å­

æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼ï¼Œè¦æ±‚ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼š

- `feat: æ–°åŠŸèƒ½`
- `fix: ä¿®å¤bug`
- `docs: æ–‡æ¡£æ›´æ–°`
- `style: æ ·å¼æ›´æ–°`
- `refactor: é‡æ„ä»£ç `
- `test: æµ‹è¯•ç›¸å…³`
- `chore: æ„å»ºé…ç½®ç­‰`

## ğŸ“ æäº¤ä¿¡æ¯ç¤ºä¾‹

âœ… **æ­£ç¡®çš„æäº¤ä¿¡æ¯**:

```
feat: æ·»åŠ æ£‹ç›˜åæ ‡æ˜¾ç¤ºåŠŸèƒ½
fix: ä¿®å¤AIç®—æ³•ä¸­çš„å†…å­˜æ³„æ¼
docs: æ›´æ–°éƒ¨ç½²æ–‡æ¡£
style: è°ƒæ•´æ¸¸æˆç•Œé¢æ ·å¼
refactor: é‡æ„æ¸¸æˆé€»è¾‘é’©å­
test: æ·»åŠ æ¸¸æˆè§„åˆ™æµ‹è¯•ç”¨ä¾‹
chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬
```

âŒ **é”™è¯¯çš„æäº¤ä¿¡æ¯**:

```
æ·»åŠ æ–°åŠŸèƒ½
fix bug
update
ä¿®æ”¹äº†ä¸€äº›ä¸œè¥¿
WIP
```

## ğŸš€ å¸¸ç”¨å‘½ä»¤

### æ‰‹åŠ¨è¿è¡Œæ£€æŸ¥

```bash
# æ£€æŸ¥ä»£ç è§„èŒƒ
pnpm lint

# ä¿®å¤ä»£ç è§„èŒƒé—®é¢˜
pnpm lint:fix

# æ ¼å¼åŒ–ä»£ç 
pnpm format

# æ£€æŸ¥ä»£ç æ ¼å¼
pnpm format:check

# TypeScript ç±»å‹æ£€æŸ¥
pnpm type-check
```

### è·³è¿‡é’©å­ï¼ˆä¸æ¨èï¼‰

å¦‚æœç¡®å®éœ€è¦è·³è¿‡é’©å­ï¼ˆä¾‹å¦‚ç´§æ€¥ä¿®å¤ï¼‰ï¼š

```bash
# è·³è¿‡ pre-commit é’©å­
git commit --no-verify -m "fix: emergency fix"

# è·³è¿‡æ‰€æœ‰é’©å­
git commit --no-verify --no-edit
```

## ğŸ”§ é…ç½®æ–‡ä»¶

- **`.husky/pre-commit`**: Pre-commit é’©å­è„šæœ¬
- **`.husky/commit-msg`**: Commit ä¿¡æ¯æ£€æŸ¥è„šæœ¬
- **`.prettierrc`**: Prettier é…ç½®
- **`.prettierignore`**: Prettier å¿½ç•¥æ–‡ä»¶
- **`.eslintrc.cjs`**: ESLint é…ç½®
- **`package.json`**: lint-staged é…ç½®

## ğŸ› æ•…éšœæ’é™¤

### 1. é’©å­æ— æ³•æ‰§è¡Œ

```bash
# ç¡®ä¿é’©å­æœ‰æ‰§è¡Œæƒé™
chmod +x .husky/pre-commit .husky/commit-msg

# é‡æ–°åˆå§‹åŒ– Husky
pnpm prepare
```

### 2. ESLint é”™è¯¯å¤ªå¤š

```bash
# æ‰‹åŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
pnpm lint:fix

# æŸ¥çœ‹å…·ä½“é”™è¯¯
pnpm lint
```

### 3. ç±»å‹æ£€æŸ¥å¤±è´¥

```bash
# è¿è¡Œç±»å‹æ£€æŸ¥æŸ¥çœ‹è¯¦ç»†é”™è¯¯
pnpm type-check
```

### 4. æäº¤ä¿¡æ¯æ ¼å¼é”™è¯¯

ç¡®ä¿æäº¤ä¿¡æ¯éµå¾ªçº¦å®šå¼æäº¤æ ¼å¼ï¼š

```
<type>: <description>

type: feat, fix, docs, style, refactor, test, chore
description: ç®€æ´æ˜äº†çš„æè¿°ï¼ˆå»ºè®®ä¸­æ–‡ï¼‰
```

## ğŸ“‹ å¼€å‘å·¥ä½œæµ

1. **ç¼–å†™ä»£ç **
2. **æ·»åŠ åˆ°æš‚å­˜åŒº**: `git add .`
3. **æäº¤ä»£ç **: `git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"`
   - è‡ªåŠ¨è¿è¡Œ ESLint æ£€æŸ¥å’Œä¿®å¤
   - è‡ªåŠ¨è¿è¡Œ Prettier æ ¼å¼åŒ–
   - è‡ªåŠ¨è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
   - æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼
4. **æ¨é€ä»£ç **: `git push`

## ğŸ¯ æœ€ä½³å®è·µ

1. **é¢‘ç¹æäº¤**: å°è€Œé¢‘ç¹çš„æäº¤æ¯”å¤§çš„æäº¤æ›´å¥½
2. **æ¸…æ™°çš„æäº¤ä¿¡æ¯**: è®©å…¶ä»–å¼€å‘è€…å®¹æ˜“ç†è§£æ”¹åŠ¨
3. **ä¿®å¤åå†æäº¤**: ä¸è¦è·³è¿‡é’©å­æäº¤æœ‰é—®é¢˜çš„ä»£ç 
4. **ä¿æŒä»£ç æ•´æ´**: å®šæœŸè¿è¡Œ `pnpm lint:fix` å’Œ `pnpm format`

## âš¡ æ€§èƒ½ä¼˜åŒ–

- **lint-staged** åªæ£€æŸ¥æš‚å­˜åŒºæ–‡ä»¶ï¼Œé¿å…æ£€æŸ¥æ•´ä¸ªé¡¹ç›®
- **ç¼“å­˜**: ESLint å’Œ TypeScript éƒ½å¯ç”¨äº†ç¼“å­˜
- **å¹¶è¡Œæ‰§è¡Œ**: å¤šä¸ªæ£€æŸ¥å¯ä»¥å¹¶è¡Œè¿è¡Œ

## ğŸ”— ç›¸å…³é“¾æ¥

- [Husky æ–‡æ¡£](https://typicode.github.io/husky/)
- [lint-staged æ–‡æ¡£](https://github.com/okonet/lint-staged)
- [çº¦å®šå¼æäº¤](https://www.conventionalcommits.org/)
- [ESLint æ–‡æ¡£](https://eslint.org/)
- [Prettier æ–‡æ¡£](https://prettier.io/)
